name: Java CI with CloudSim

on:
  push:
    branches: ["master"]
  pull_request:
    branches: ["master"]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Set up JDK 11
        uses: actions/setup-java@v4
        with:
          distribution: "temurin"
          java-version: "11"

      - name: Compile Java Files
        working-directory: cloudsim-3.0.3/examples
        run: |
          mkdir -p bin
          find . -name "*.java" > sources.txt
          javac -cp "../../lib/*:." -d bin @sources.txt

      - name: Run CloudSim Simulation
        working-directory: cloudsim-3.0.3/examples
        run: |
          java -cp "bin:../../lib/*:." org.cloudbus.cloudsim.examples.cloudComputing.MySimulation
